CREATE TABLE auth_token (TOKEN VARCHAR(255) NOT NULL, last_used TIMESTAMP, live_time INTEGER, user_agent VARCHAR(255), username BIGINT, PRIMARY KEY (TOKEN));
CREATE TABLE config (NAME VARCHAR(255) NOT NULL, VALUE VARCHAR(255), PRIMARY KEY (NAME));
CREATE TABLE nodes (ID BIGINT, PARENT VARCHAR(255), PHOTO_ID BIGINT, PRIMARY KEY (ID));
CREATE TABLE photos (ID BIGINT, APERTURE VARCHAR(255), CAMMAKE VARCHAR(255), CAMMODEL VARCHAR(255), CREATETIME TIMESTAMP, DESCR VARCHAR(255), DIGITTIME TIMESTAMP, DPI VARCHAR(255), EXPTIME VARCHAR(255), focal_len VARCHAR(255), FOCUSDIST VARCHAR(255), GPSALT LONGVARCHAR, GPSDIR REAL, GPSLAT REAL, GPSLON REAL, HIDDEN BOOLEAN, ISOSPEED VARCHAR(255), MEDIATYPE VARCHAR(255), NAME VARCHAR(255), ONSITEID VARCHAR(255), REALURL LONGVARBINARY, SHUTTERSPEED VARCHAR(255), TYPE INTEGER, UNICID VARCHAR(255), UPDATETIME TIMESTAMP, site BIGINT, PRIMARY KEY (ID));
CREATE INDEX INDEX_photos_ONSITEID ON photos (ONSITEID);
CREATE INDEX INDEX_photos_CREATETIME ON photos (CREATETIME);
CREATE TABLE sites (ID BIGINT, CONNECTORSTATE VARCHAR(255), CONNECTORTYPE VARCHAR(255), LASTSCANDATE TIMESTAMP, NAME VARCHAR(255), ROOT VARCHAR(255), SITEUSER VARCHAR(255), PRIMARY KEY (ID));
CREATE TABLE group_authorities (ID BIGINT, AUTHORITY VARCHAR(255), GROUP_ID BIGINT, PRIMARY KEY (ID));
CREATE TABLE group_members (ID BIGINT, USERNAME VARCHAR(255), GROUP_ID BIGINT, PRIMARY KEY (ID));
CREATE TABLE groups (ID BIGINT, group_name VARCHAR(255), PRIMARY KEY (ID));
CREATE TABLE users (ID BIGINT NOT NULL, ACCOUNTENABLED BOOLEAN, ACCOUNTEXPIRED BOOLEAN, ACCOUNTLOCKED BOOLEAN, CREDENTIALSEXPIRED BOOLEAN, PASSWORD VARCHAR(255), USERNAME VARCHAR(255), PRIMARY KEY (ID));
CREATE TABLE user_authorities (AUTHORITY VARCHAR(255) NOT NULL, id BIGINT NOT NULL, PRIMARY KEY (AUTHORITY, id));
CREATE TABLE site_properties (NAME VARCHAR(255) NOT NULL, DESCRIPTION VARCHAR(255), VALUE VARCHAR(255), id BIGINT, PRIMARY KEY (NAME, id));
CREATE TABLE task_records (ID BIGINT, MESSAGE VARCHAR(256), NAME VARCHAR(255), STARTTIME TIMESTAMP, STATUS VARCHAR(255), STOPTIME TIMESTAMP, site BIGINT, PRIMARY KEY (ID));
CREATE TABLE medias (ID BIGINT, ACCESSTYPE INTEGER, HEIGHT INTEGER, MIMETYPE VARCHAR(255), PATH VARCHAR(255), SIZE BIGINT, TYPE INTEGER, WIDTH INTEGER, photoId BIGINT, PRIMARY KEY (ID));
CREATE TABLE schedules (ID BIGINT, DAYOFMONTH VARCHAR(255), DAYOFWEEK VARCHAR(255), HOUR VARCHAR(255), MINUTE VARCHAR(255), MONTH VARCHAR(255), SECONDS VARCHAR(255), TASKNAME VARCHAR(255), SITE_ID BIGINT, PRIMARY KEY (ID));
ALTER TABLE users ADD CONSTRAINT UNQ_users_0 UNIQUE (username);
ALTER TABLE auth_token ADD CONSTRAINT FK_auth_token_username FOREIGN KEY (username) REFERENCES users (ID);
ALTER TABLE nodes ADD CONSTRAINT FK_nodes_PHOTO_ID FOREIGN KEY (PHOTO_ID) REFERENCES photos (ID);
ALTER TABLE photos ADD CONSTRAINT FK_photos_site FOREIGN KEY (site) REFERENCES sites (ID);
ALTER TABLE group_authorities ADD CONSTRAINT FK_group_authorities_GROUP_ID FOREIGN KEY (GROUP_ID) REFERENCES groups (ID);
ALTER TABLE group_members ADD CONSTRAINT FK_group_members_GROUP_ID FOREIGN KEY (GROUP_ID) REFERENCES groups (ID);
ALTER TABLE user_authorities ADD CONSTRAINT FK_user_authorities_id FOREIGN KEY (id) REFERENCES users (ID);
ALTER TABLE site_properties ADD CONSTRAINT FK_site_properties_id FOREIGN KEY (id) REFERENCES sites (ID);
ALTER TABLE task_records ADD CONSTRAINT FK_task_records_site FOREIGN KEY (site) REFERENCES sites (ID);
ALTER TABLE medias ADD CONSTRAINT FK_medias_photoId FOREIGN KEY (photoId) REFERENCES photos (ID);
ALTER TABLE schedules ADD CONSTRAINT FK_schedules_SITE_ID FOREIGN KEY (SITE_ID) REFERENCES sites (ID);
CREATE TABLE SEQUENCE (SEQ_NAME VARCHAR(50) NOT NULL, SEQ_COUNT NUMERIC(38), PRIMARY KEY (SEQ_NAME));
INSERT INTO SEQUENCE(SEQ_NAME, SEQ_COUNT) values ('SEQ_GEN', 0);
INSERT INTO SEQUENCE(SEQ_NAME, SEQ_COUNT) values ('TASK_REC_ID', 0);
INSERT INTO SEQUENCE(SEQ_NAME, SEQ_COUNT) values ('SITE_ID', 0);
INSERT INTO SEQUENCE(SEQ_NAME, SEQ_COUNT) values ('SCHED_ID', 0);
INSERT INTO SEQUENCE(SEQ_NAME, SEQ_COUNT) values ('MEDIA_ID', 0);
INSERT INTO SEQUENCE(SEQ_NAME, SEQ_COUNT) values ('NODE_ID', 0);
INSERT INTO SEQUENCE(SEQ_NAME, SEQ_COUNT) values ('PHOTO_ID', 0);